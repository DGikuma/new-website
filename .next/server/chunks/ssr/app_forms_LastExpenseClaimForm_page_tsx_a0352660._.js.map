{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/New_Website/birdview-website/app/forms/LastExpenseClaimForm/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport {\n    Card,\n    CardBody,\n    Input,\n    Checkbox,\n    Button,\n    Divider,\n    Stepper,\n    Step,\n    StepIndicator,\n    StepTitle,\n    StepDescription,\n    toast,\n    Spinner,\n} from \"@heroui/react\";\n\nexport interface FormdataType {\n    [key: string]: any;\n}\n\nconst steps = [\"Member Details\", \"Privacy & Consent\"];\n\nexport default function LastExpenseClaimForm() {\n    const [activeStep, setActiveStep] = useState<number>(0);\n    const [formData, setFormData] = useState<FormdataType>({});\n    const [loading, setLoading] = useState<boolean>(false);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value, type, checked } = e.target;\n        setFormData((prev) => ({\n            ...prev,\n            [name]: type === \"checkbox\" ? checked : value,\n        }));\n    };\n\n    const handleNext = () => setActiveStep((prev) => prev + 1);\n    const handleBack = () => setActiveStep((prev) => prev - 1);\n\n    const handleSubmit = async () => {\n        setLoading(true);\n        try {\n            const res = await fetch(\"/api/last-expense-claim\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(formData),\n            });\n            const data = await res.json();\n            if (res.ok) {\n                toast.success(\"Last Expense Claim submitted ✅\");\n                setFormData({});\n                setActiveStep(0);\n            } else {\n                toast.error(data.error || \"Submission failed ❌\");\n            }\n        } catch {\n            toast.error(\"Server error. Try again later.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 px-4 py-10\">\n            <Card className=\"w-full max-w-3xl shadow-xl rounded-2xl bg-white\">\n                <CardBody className=\"p-8 space-y-8\">\n                    <div className=\"text-center space-y-1\">\n                        <h1 className=\"text-2xl font-bold text-primary\">Birdview Insurance</h1>\n                        <p className=\"text-lg text-gray-700\">Last Expense Claim Form 2025</p>\n                    </div>\n\n                    {/* Stepper */}\n                    <Stepper size=\"sm\" currentStep={activeStep} className=\"mb-6\">\n                        {steps.map((label, i) => (\n                            <Step key={i} isCompleted={activeStep > i}>\n                                <StepIndicator />\n                                <StepTitle>{label}</StepTitle>\n                                <StepDescription />\n                            </Step>\n                        ))}\n                    </Stepper>\n\n                    {/* Step 1 */}\n                    {activeStep === 0 && (\n                        <div>\n                            <h2 className=\"text-lg font-semibold text-primary mb-4\">\n                                Step 1: Member & Claim Details\n                            </h2>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                <Input\n                                    isRequired\n                                    label=\"Name of Member\"\n                                    name=\"memberName\"\n                                    value={formData.memberName || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    isRequired\n                                    label=\"Membership / Policy No.\"\n                                    name=\"policyNumber\"\n                                    value={formData.policyNumber || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    isRequired\n                                    label=\"Mobile No.\"\n                                    name=\"memberPhone\"\n                                    value={formData.memberPhone || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    label=\"Amount Assured\"\n                                    name=\"amountAssured\"\n                                    value={formData.amountAssured || \"\"}\n                                    onChange={handleChange}\n                                />\n\n                                <Input\n                                    isRequired\n                                    label=\"Name of Claimant / Beneficiary\"\n                                    name=\"claimantName\"\n                                    value={formData.claimantName || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    isRequired\n                                    label=\"Relationship to Member\"\n                                    name=\"relationship\"\n                                    value={formData.relationship || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    isRequired\n                                    label=\"Claimant Address\"\n                                    name=\"claimantAddress\"\n                                    value={formData.claimantAddress || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    isRequired\n                                    label=\"Claimant Mobile No.\"\n                                    name=\"claimantPhone\"\n                                    value={formData.claimantPhone || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    label=\"Amount Claimed\"\n                                    name=\"amountClaimed\"\n                                    value={formData.amountClaimed || \"\"}\n                                    onChange={handleChange}\n                                />\n\n                                <Input\n                                    label=\"Corporate / Group Name (if applicable)\"\n                                    name=\"corporateGroup\"\n                                    value={formData.corporateGroup || \"\"}\n                                    onChange={handleChange}\n                                    className=\"col-span-2\"\n                                />\n                            </div>\n\n                            <Divider className=\"my-6\" />\n\n                            <h3 className=\"font-medium text-gray-700 mb-2\">Mode of Payment</h3>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                <Input\n                                    label=\"Bank Name\"\n                                    name=\"bankName\"\n                                    value={formData.bankName || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    label=\"Branch\"\n                                    name=\"bankBranch\"\n                                    value={formData.bankBranch || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    label=\"Account Name\"\n                                    name=\"accountName\"\n                                    value={formData.accountName || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    label=\"Account No.\"\n                                    name=\"accountNumber\"\n                                    value={formData.accountNumber || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    label=\"M-Pesa No.\"\n                                    name=\"mpesaNumber\"\n                                    value={formData.mpesaNumber || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    label=\"M-Pesa Paybill\"\n                                    name=\"mpesaPaybill\"\n                                    value={formData.mpesaPaybill || \"\"}\n                                    onChange={handleChange}\n                                />\n                            </div>\n\n                            <Input\n                                label=\"Reimbursement Amount\"\n                                name=\"reimbursementAmount\"\n                                value={formData.reimbursementAmount || \"\"}\n                                onChange={handleChange}\n                                className=\"mt-4\"\n                            />\n\n                            <Divider className=\"my-6\" />\n\n                            <h3 className=\"font-medium text-primary mb-2\">Approved By (Official Use)</h3>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                <Input\n                                    label=\"Medical Assessor Name\"\n                                    name=\"medicalAssessorName\"\n                                    value={formData.medicalAssessorName || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    label=\"Medical Assessor Signature\"\n                                    name=\"medicalAssessorSignature\"\n                                    value={formData.medicalAssessorSignature || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    label=\"Claims Manager Name\"\n                                    name=\"claimsManagerName\"\n                                    value={formData.claimsManagerName || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    label=\"Claims Manager Signature\"\n                                    name=\"claimsManagerSignature\"\n                                    value={formData.claimsManagerSignature || \"\"}\n                                    onChange={handleChange}\n                                />\n                            </div>\n\n                            <Divider className=\"my-6\" />\n\n                            <h3 className=\"font-medium text-gray-700 mb-2\">\n                                Required Supporting Documents\n                            </h3>\n                            <div className=\"space-y-2\">\n                                <Checkbox\n                                    name=\"burialPermit\"\n                                    isSelected={formData.burialPermit || false}\n                                    onChange={handleChange}\n                                >\n                                    Burial Permit\n                                </Checkbox>\n                                <Checkbox\n                                    name=\"deceasedIDCopy\"\n                                    isSelected={formData.deceasedIDCopy || false}\n                                    onChange={handleChange}\n                                >\n                                    Copy of Deceased’s ID\n                                </Checkbox>\n                                <Checkbox\n                                    name=\"claimantIDCopy\"\n                                    isSelected={formData.claimantIDCopy || false}\n                                    onChange={handleChange}\n                                >\n                                    Copy of Claimant’s ID\n                                </Checkbox>\n                                <Checkbox\n                                    name=\"bankMpesaDetails\"\n                                    isSelected={formData.bankMpesaDetails || false}\n                                    onChange={handleChange}\n                                >\n                                    Bank / M-Pesa Details\n                                </Checkbox>\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Step 2 */}\n                    {activeStep === 1 && (\n                        <div>\n                            <h2 className=\"text-lg font-semibold text-primary mb-4\">\n                                Privacy Notice\n                            </h2>\n                            <div className=\"max-h-48 overflow-y-auto p-4 rounded-md bg-gray-50 text-sm text-gray-600 mb-4 space-y-3\">\n                                <p>\n                                    Birdview Insurance is committed to protecting your personal\n                                    data. In line with the Data Protection Act, we collect, store,\n                                    and process your data strictly for insurance services,\n                                    claims processing, and regulatory compliance.\n                                </p>\n                                <p>\n                                    By signing this form, you consent to Birdview Insurance\n                                    collecting and processing your data, including sensitive\n                                    medical and financial information, for evaluating and paying\n                                    insurance claims.\n                                </p>\n                                <p>\n                                    Your data may be shared with service providers, regulators, or\n                                    reinsurers for the purposes outlined above. Birdview ensures\n                                    your data is safeguarded.\n                                </p>\n                                <p>\n                                    You have the right to access, correct, or request deletion of\n                                    your personal data held by Birdview, subject to applicable law.\n                                </p>\n                            </div>\n\n                            <Checkbox\n                                name=\"consentMarketing\"\n                                isSelected={formData.consentMarketing || false}\n                                onChange={handleChange}\n                            >\n                                I consent to my phone/email being used for marketing information.\n                            </Checkbox>\n                            <Checkbox\n                                name=\"consentMinor\"\n                                isSelected={formData.consentMinor || false}\n                                onChange={handleChange}\n                            >\n                                I consent to Birdview processing data for a minor below 18 years.\n                            </Checkbox>\n\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n                                <Input\n                                    isRequired\n                                    type=\"date\"\n                                    label=\"Date\"\n                                    name=\"privacyDate\"\n                                    value={formData.privacyDate || \"\"}\n                                    onChange={handleChange}\n                                />\n                                <Input\n                                    isRequired\n                                    label=\"Signature of Beneficiary\"\n                                    name=\"privacySignature\"\n                                    value={formData.privacySignature || \"\"}\n                                    onChange={handleChange}\n                                />\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Actions */}\n                    <div className=\"flex justify-between pt-6\">\n                        <Button\n                            disabled={activeStep === 0}\n                            onPress={handleBack}\n                            variant=\"bordered\"\n                        >\n                            Back\n                        </Button>\n                        {activeStep === steps.length - 1 ? (\n                            <Button\n                                color=\"primary\"\n                                isDisabled={loading}\n                                onPress={handleSubmit}\n                                className=\"min-w-[120px]\"\n                            >\n                                {loading ? <Spinner size=\"sm\" color=\"white\" /> : \"Submit\"}\n                            </Button>\n                        ) : (\n                            <Button color=\"primary\" onPress={handleNext}>\n                                Next\n                            </Button>\n                        )}\n                    </div>\n                </CardBody>\n            </Card>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}