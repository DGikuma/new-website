{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/New_Website/birdview-website/app/forms/claims/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { Input, Button, Card, CardBody, toast } from \"@heroui/react\";\nimport Image from \"next/image\";\nimport axios from \"axios\";\n\nexport interface FormdataType {\n  policy_no: string;\n  national_id: string;\n  contactperson: string;\n  supportingDocuments: File[];\n}\n\nconst ClaimForm: React.FC = () => {\n  const [formData, setFormData] = useState<FormdataType>({\n    policy_no: \"\",\n    national_id: \"\",\n    contactperson: \"\",\n    supportingDocuments: [],\n  });\n\n  const [fileError, setFileError] = useState<string>(\"\");\n  const [loaderIcon, setLoaderIcon] = useState<boolean>(false);\n\n  // Handle input changes\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  // Handle file uploads\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!e.target.files) return;\n    const files = Array.from(e.target.files);\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    const oversizedFiles = files.filter((file) => file.size > maxSize);\n\n    if (oversizedFiles.length > 0) {\n      setFileError(\"One or more files exceed the 5MB size limit.\");\n      return;\n    }\n\n    setFileError(\"\");\n    setFormData((prevData) => ({\n      ...prevData,\n      supportingDocuments: files,\n    }));\n  };\n\n  // Reset form\n  const handleReset = () => {\n    setFormData({\n      policy_no: \"\",\n      national_id: \"\",\n      contactperson: \"\",\n      supportingDocuments: [],\n    });\n    setFileError(\"\");\n  };\n\n  // Handle form submit\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoaderIcon(true);\n\n    try {\n      const data = new FormData();\n      data.append(\"policy_no\", formData.policy_no);\n      data.append(\"national_id\", formData.national_id);\n      data.append(\"contactperson\", formData.contactperson);\n      formData.supportingDocuments.forEach((file) => {\n        data.append(\"supportingDocuments\", file);\n      });\n\n      const res = await axios.post(\"/api/send-claim\", data, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n        timeout: 10000,\n      });\n\n      if (res.status === 200) {\n        toast({\n          title: \"Claim Submitted\",\n          description: res.data.message || \"Your claim has been received.\",\n          color: \"success\",\n          variant: \"solid\",\n          placement: \"top-right\",\n        });\n        handleReset();\n      } else {\n        toast({\n          title: \"Submission Failed\",\n          description: res.data.error || \"Something went wrong.\",\n          color: \"danger\",\n          variant: \"solid\",\n          placement: \"top-right\",\n        });\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description:\n          error.response?.data?.error || error.message || \"Submission error\",\n        color: \"danger\",\n        variant: \"solid\",\n        placement: \"top-right\",\n      });\n    } finally {\n      setLoaderIcon(false);\n    }\n  };\n\n  return (\n    <div\n      className=\"min-h-screen flex items-center justify-center px-4 \n             bg-[url('/images/backdrop2.png')] bg-cover bg-center bg-no-repeat\"\n    >\n      <Card className=\"w-full max-w-2xl shadow-2xl border border-gray-200 rounded-3xl bg-white/95 backdrop-blur-lg\">\n        <CardBody className=\"p-10\">\n          {loaderIcon && (\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-white/80\">\n              <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600\"></div>\n            </div>\n          )}\n\n          {/* Logo + Heading */}\n          <div className=\"text-center mb-10\">\n            <Image\n              src=\"/images/logo.jpeg\"\n              alt=\"Company Logo\"\n              width={200}\n              height={60}\n              className=\"mx-auto mb-4\"\n            />\n            <h1 className=\"text-3xl font-bold text-gray-900 tracking-tight\">\n              Insurance Claim Form\n            </h1>\n            <p className=\"text-gray-500 mt-2 text-sm\">\n              Submit your policy claims securely with supporting documents.\n            </p>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <Input\n              isRequired\n              name=\"policy_no\"\n              label=\"Policy Number\"\n              placeholder=\"Enter your policy number\"\n              value={formData.policy_no}\n              onChange={handleChange}\n              variant=\"bordered\"\n              radius=\"lg\"\n            />\n\n            <Input\n              isRequired\n              name=\"national_id\"\n              label=\"National ID Number\"\n              placeholder=\"Enter your national ID\"\n              value={formData.national_id}\n              onChange={handleChange}\n              variant=\"bordered\"\n              radius=\"lg\"\n            />\n\n            <Input\n              isRequired\n              name=\"contactperson\"\n              label=\"Contact Person\"\n              placeholder=\"Enter contact person name\"\n              value={formData.contactperson}\n              onChange={handleChange}\n              variant=\"bordered\"\n              radius=\"lg\"\n            />\n\n            {/* File Upload */}\n            <div>\n              <label\n                htmlFor=\"upload-files\"\n                className=\"block text-gray-700 font-medium mb-2\"\n              >\n                Upload Supporting Documents\n              </label>\n              <input\n                type=\"file\"\n                id=\"upload-files\"\n                multiple\n                onChange={handleFileChange}\n                className=\"hidden\"\n              />\n              <label htmlFor=\"upload-files\">\n                <Button\n                  as=\"span\"\n                  color=\"success\"\n                  variant=\"shadow\"\n                  className=\"font-semibold text-white\"\n                >\n                  Choose Files\n                </Button>\n              </label>\n\n              {fileError && (\n                <p className=\"text-red-500 text-sm mt-2\">{fileError}</p>\n              )}\n\n              {formData.supportingDocuments.length > 0 && (\n                <ul className=\"mt-3 text-sm text-gray-600 list-disc list-inside\">\n                  {formData.supportingDocuments.map((file, idx) => (\n                    <li key={idx}>{file.name}</li>\n                  ))}\n                </ul>\n              )}\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex flex-col sm:flex-row justify-center gap-6 pt-4\">\n              <Button\n                type=\"submit\"\n                color=\"primary\"\n                size=\"lg\"\n                radius=\"lg\"\n                className=\"px-10 text-white font-semibold\"\n              >\n                Submit\n              </Button>\n              <Button\n                type=\"reset\"\n                color=\"danger\"\n                size=\"lg\"\n                radius=\"lg\"\n                className=\"px-10 text-white font-semibold\"\n                onClick={handleReset}\n              >\n                Reset\n              </Button>\n            </div>\n          </form>\n        </CardBody>\n      </Card>\n    </div>\n  );\n};\n\nexport default ClaimForm;\n"],"names":[],"mappings":"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","debugId":null}}]
}